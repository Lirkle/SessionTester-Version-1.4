/* 1) –°–∫–∞–∂–∏ –±—Ä–∞—É–∑–µ—Ä—É: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—ë–º–Ω–∞—è */
    html { color-scheme: dark; }

    :root{
      --bg:#070b12;
      --panel:rgba(16,24,36,.88);
      --panel2:rgba(12,18,28,.82);
      --stroke:rgba(120,170,255,.18);
      --stroke2:rgba(255,255,255,.06);

      --text:#e9f0ff;
      --muted:#a4b5d6;
      --muted2:#7f93b8;

      --accent:#2b6cff;
      --accent2:#64a7ff;

      --ok:#42e6a3;
      --bad:#ff6b7a;
      --warn:#ffc06b;

      --r12:12px;
      --r16:16px;
      --r20:20px;

      --shadow:0 16px 60px rgba(0,0,0,.45);
      --shadow2:0 10px 30px rgba(0,0,0,.35);

      --ring:0 0 0 3px rgba(100,167,255,.28);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        linear-gradient(180deg, rgba(7,11,18,0) 0%, rgba(7,11,18,.3) 100%),
        radial-gradient(800px 500px at 15% -10%, rgba(43,108,255,.08), transparent 55%),
        radial-gradient(700px 450px at 85% 20%, rgba(100,167,255,.06), transparent 50%),
        var(--bg);
      overflow-x:hidden;
      position:relative;
      background-attachment: fixed;
    }

    /* Premium noise texture overlay */
    body::before{
      content:"";
      position:fixed;
      inset:-20px;
      pointer-events:none;
      opacity:.08;
      background:
        repeating-linear-gradient(
          0deg,
          rgba(255,255,255,.015) 0 1px,
          transparent 1px 3px
        );
      transform:translateZ(0);
      will-change:transform;
      z-index:1;
    }

    a{color:inherit}
    .muted{color:var(--muted); font-size:14px; line-height:1.45}
    .small{font-size:13px}
    .kbd{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
      border:1px solid var(--stroke);
      padding:2px 7px;
      border-radius:10px;
      background:rgba(255,255,255,.04);
      color:#cfe0ff;
    }

    /* Layout */
    .app{
      min-height:100%;
      display:flex;
      flex-direction:column;
      position:relative;
      z-index:0;
    }

    .topbar{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(7,11,18,.86), rgba(7,11,18,.55));
      border-bottom:1px solid var(--stroke2);
    }

    .topbar__inner{
      max-width:1200px;
      margin:0 auto;
      padding:16px 18px;
      display:grid;
      grid-template-columns: minmax(0, 1fr) auto; /* —Å–ª–µ–≤–∞ –±—Ä–µ–Ω–¥ (–º–æ–∂–µ—Ç —Å–∂–∏–º–∞—Ç—å—Å—è), —Å–ø—Ä–∞–≤–∞ pills */
      gap:14px;
      align-items:center;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      min-width:0;              /* –≤–∞–∂–Ω–æ: —Ä–∞–∑—Ä–µ—à–∞–µ–º —Å–∂–∏–º–∞—Ç—å—Å—è */
    }

    .logo{
      width:40px;height:40px;
      border-radius:14px;
      background:
  url(/SessionTester-Version-1.4/static/img/icon.png) center / contain no-repeat,
  radial-gradient(18px 18px at 30% 30%, rgba(255, 255, 255, .20), transparent 60%);
      box-shadow: 0 14px 40px rgba(43,108,255,.18);
      border:1px solid rgba(255,255,255,.12);
      flex:0 0 auto;
    }

    h1{
      margin:0;
      font-size:18px;
      letter-spacing:.2px;
      line-height:1.15;
    }
    .subtitle{
      color:var(--muted2);
      font-size:12.5px;
      margin-top:2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:34ch;           /* –±—ã–ª–æ 52ch ‚Äî —Å–ª–∏—à–∫–æ–º –∂–∏—Ä–Ω–æ –¥–ª—è —Ç–æ–ø–±–∞—Ä–∞ */
    }

    .topstats{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
      justify-self:end;
      min-width:0;
    }

    /* Stats Pills in Topbar */
    .stats-pill{
      font-size:12px;
      white-space:nowrap;
      flex-shrink:0;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.04);
      border:1px solid var(--stroke);
      box-shadow: 0 8px 22px rgba(0,0,0,.20);
      font-size:12.5px;
      color:var(--muted);
      white-space:nowrap;
      flex-shrink:0;
      vertical-align:middle;
    }

    @media (max-width: 980px){
      .topbar__inner{
        grid-template-columns: 1fr;
        align-items:start;
      }
      .topstats{
        justify-self:start;
      }
    }

    .dot{
      width:8px;height:8px;border-radius:999px;
      background: var(--warn);
      box-shadow: 0 0 0 3px rgba(255,192,107,.18);
    }
    #statusPill .dot{ background: var(--warn); box-shadow: 0 0 0 3px rgba(255,192,107,.18); }
    
.achievement-text{
  display:inline-block;
  font-weight:800;
  letter-spacing:1.4px;
  font-size:13px;
  text-transform:uppercase;

  background-image: linear-gradient(120deg, #cd7f32, #f5c18b, #cd7f32);
  background-size: 220% 220%;
  background-position: 0% 50%;

  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  -webkit-text-fill-color:transparent;

  animation: achvGradient 2.2s ease-in-out infinite;
}

.achievement-text.tier-2{
  background-image: linear-gradient(120deg, #c9C9C9, #ffffff, #494949);
}

.achievement-text.tier-3{
  background-image: linear-gradient(120deg, #ffd700, #fff2a8, #ffd700);
}

.achievement-text.tier-4{
  background-image: linear-gradient(120deg, #e0e7ff, #ffffff, #c084fc, #e0e7ff);
  background-size: 300% 300%;
}

@keyframes achvGradient{
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}



    /* –ö—É–±–æ–∫ –≤–º–µ—Å—Ç–æ —Ç–æ—á–∫–∏ –≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ */
    .achv-cup{
      width:18px;
      height:18px;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      background:rgba(255,255,255,.06);
    }
    .achv-cup::before{
      content:"üèÜ";
    }
    .achv-cup.tier-1{ color:#cd7f32; }
    .achv-cup.tier-2{ color:#c0c0c0; }
    .achv-cup.tier-3{ color:#ffd700; }
    .achv-cup.tier-4{ color:#c084fc; }

    .content{
      max-width:1200px;
      width:100%;
      margin:0 auto;
      padding:18px;
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:16px;
      align-items:start;
    }

    /* –ü–ª–∞–≤–∞—é—â–∏–π —Ç–∞–π–º–µ—Ä –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ */
    .floating-timer{
      position:fixed;
      top:80px;
      right:20px;
      background:rgba(255,192,107,.15);
      border:2px solid var(--warn);
      border-radius:12px;
      padding:12px 16px;
      font-size:14px;
      font-weight:600;
      color:var(--warn);
      box-shadow:0 8px 24px rgba(255,192,107,.25);
      z-index:45;
      backdrop-filter:blur(10px);
      white-space:nowrap;
      animation:slideIn 0.3s ease-out;
    }

    .floating-timer__label{
      display:inline-block;
      margin-right:6px;
      opacity:0.8;
    }

    @keyframes slideIn{
      from{
        opacity:0;
        transform:translateY(-10px);
      }
      to{
        opacity:1;
        transform:translateY(0);
      }
    }

    @media (max-width: 640px){
      .floating-timer{
        top:auto;
        bottom:80px;
        right:12px;
        left:12px;
        width:auto;
        text-align:center;
      }
    }

    /* FOCUS MODE: when test is running */
    .app.is-running .content{
      grid-template-columns: 1fr;
      max-width:980px;
      padding:18px;
      margin:0 auto;
    }

    .app.is-running .sidebar{
      display:none;
    }

    .app.is-running .main{
      margin:0 auto;
      width:100%;
    }

    @media (max-width: 980px){
      .content{ grid-template-columns: 1fr; }
      .brand{ min-width:unset; }
      .subtitle{ max-width:38ch; }
    }

    /* Panels */
    .panel{
      background:var(--panel);
      border:1px solid var(--stroke2);
      border-radius: var(--r20);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }

    .panel__head{
      padding:14px 14px 10px 14px;
      border-bottom:1px solid rgba(255,255,255,.06);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .panel__title{
      font-size:13px;
      letter-spacing:.25px;
      text-transform:uppercase;
      color:var(--muted2);
      margin:0;
    }
    .panel__body{ padding:14px; }

    .sidebar{
      position:sticky;
      top:86px;
    }
    @media (max-width: 980px){
      .sidebar{ position:relative; top:auto; }
    }

    .helper{
      margin-top:10px;
      padding:12px 12px;
      border-radius: var(--r16);
      border:1px dashed rgba(100,167,255,.25);
      background:rgba(100,167,255,.06);
      color:var(--muted);
      font-size:13px;
    }

    /* Controls */
    .field{
      display:flex;
      flex-direction:column;
      gap:7px;
      margin-bottom:12px;
    }
    .label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      color:var(--muted);
      font-size:13px;
    }

    /* Hardmode toggle */
    .hardmode-toggle{
      display:block;
      cursor:pointer;
      user-select:none;
    }

    .hardmode-toggle input{
      position:absolute;
      opacity:0;
      pointer-events:none;
    }

    .hardmode-toggle__pill{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(120,170,255,.25);
      background:linear-gradient(135deg, rgba(12,18,28,.95), rgba(20,32,48,.95));
      box-shadow:0 10px 26px rgba(0,0,0,.45);
      transition:
        border-color .16s ease,
        box-shadow .16s ease,
        background .16s ease,
        transform .08s ease;
      position:relative;
      padding-right:64px; /* —Å–ø—Ä–∞–≤–∞ –º–µ—Å—Ç–æ –ø–æ–¥ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å */
    }

    .hardmode-toggle__icon{
      width:30px;
      height:30px;
      border-radius:999px;
      background:
        radial-gradient(14px 14px at 30% 25%, rgba(255,255,255,.24), transparent 60%),
        conic-gradient(from 210deg, #ff6b7a, #ffc06b, #64a7ff, #ff6b7a);
      position:relative;
      box-shadow:0 8px 22px rgba(0,0,0,.5);
      flex:0 0 auto;
    }

    .hardmode-toggle__icon::before{
      content:"H";
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
      font-size:14px;
      color:#05070b;
      text-shadow:0 0 8px rgba(255,255,255,.4);
    }

    .hardmode-toggle__text{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }

    .hardmode-toggle__title{
      font-size:13px;
      font-weight:800;
      letter-spacing:.3px;
      text-transform:uppercase;
      color:#e9f0ff;
    }

    .hardmode-toggle__sub{
      font-size:12px;
      color:var(--muted2);
    }

    .hardmode-toggle__pill::after{
      /* –¥–æ—Ä–æ–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è */
      content:"";
      position:absolute;
      right:16px;
      top:50%;
      transform:translateY(-50%);
      width:32px;
      height:18px;
      border-radius:999px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(120,170,255,.4);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.1);
      z-index:1;
    }

    /* –ø–æ–ª–∑—É–Ω–æ–∫ */
    .hardmode-toggle__pill::before{
      content:"";
      position:absolute;
      top:40%;
      right:18px; /* –≤—ã–∫–ª—é—á–µ–Ω ‚Äî —É –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è –¥–æ—Ä–æ–∂–∫–∏ */
      width:14px;
      height:14px;
      border-radius:999px;
      background:rgba(120,170,255,.9);
      box-shadow:0 0 0 0 rgba(120,170,255,.8);
      transition:
        right .16s ease,
        background .16s ease,
        box-shadow .16s ease;
      z-index:2;
      transform:translateY(-1px);
    }

    .hardmode-toggle input:checked + .hardmode-toggle__pill{
      border-color:rgba(255,107,122,.8);
      background:linear-gradient(135deg, rgba(36,13,22,.98), rgba(30,10,20,.98));
      box-shadow:0 14px 32px rgba(255,107,122,.35);
      transform:translateY(-1px);
    }

    .hardmode-toggle input:checked + .hardmode-toggle__pill::before{
      right:34px; /* –≤–∫–ª—é—á–µ–Ω ‚Äî —Å–º–µ—â–∞–µ–º –≤–Ω—É—Ç—Ä—å –¥–æ—Ä–æ–∂–∫–∏ –∫ –ª–µ–≤–æ–º—É –∫—Ä–∞—é */
      background:#ff6b7a;
      box-shadow:0 0 0 4px rgba(255,107,122,.3);
    }

    .hardmode-toggle input:checked + .hardmode-toggle__pill .hardmode-toggle__sub{
      color:#ffc6d0;
    }

    select, input[type="text"]{
      width:100%;
      padding:11px 12px;
      border-radius: 14px;
      border:1px solid rgba(120,170,255,.22);
      background: rgba(255,255,255,.035);
      color: var(--text);
      outline:none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }

    /* 2) –¢—ë–º–Ω—ã–π –≤–∏–¥ –¥–ª—è —Å–∞–º–æ–≥–æ select */
    select{
      color-scheme: dark;
      background: rgba(255,255,255,.035);
      color: #e9f0ff;
      border: 1px solid rgba(120,170,255,.22);
      border-radius: 14px;
    }

    /* 3) –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫—Ä–∞—Å–∏—Ç—å option (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ –≤–µ–∑–¥–µ) */
    select option{
      background: #0d141d;
      color: #e9f0ff;
    }

    /* Hide disabled options */
    select option:disabled{
      display: none;
    }

    select:focus, input[type="text"]:focus{ box-shadow: var(--ring); border-color: rgba(100,167,255,.45); }

    .btnrow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:8px;
    }
    @media (max-width: 420px){
      .btnrow{ grid-template-columns: 1fr; }
    }

    button{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:11px 12px;
      border-radius: 14px;
      font-weight:700;
      letter-spacing:.15px;
      color:#fff;
      background: linear-gradient(135deg, rgba(43,108,255,.95), rgba(100,167,255,.68));
      box-shadow: 0 14px 36px rgba(43,108,255,.20);
      transition: transform .08s ease, filter .15s ease, box-shadow .15s ease;
    }
    button:hover{ filter: brightness(1.05); }
    button:active{ transform: translateY(1px); }
    button:focus{ outline:none; box-shadow: var(--ring), 0 14px 36px rgba(43,108,255,.22); }
    button:disabled{ opacity:.5; cursor:not-allowed; filter:saturate(.7); box-shadow:none; }

    button.secondary{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(120,170,255,.22);
      color: var(--text);
      box-shadow: none;
    }
    button.secondary:hover{ background: rgba(255,255,255,.08); }

    /* Main quiz area */
    .main{
      display:flex;
      flex-direction:column;
      gap:14px;
      min-width:0;
    }

    .hero{
      padding:16px;
      border-radius: var(--r20);
      background:
        radial-gradient(300px 200px at 12% 12%, rgba(100,167,255,.16), transparent 55%),
        radial-gradient(280px 220px at 88% 18%, rgba(66,230,163,.10), transparent 55%),
        rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.06);
      box-shadow: var(--shadow2);
    }
    .hero__row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .hero__left{ min-width:260px; }
    .hero__title{
      margin:0;
      font-size:16px;
      font-weight:800;
    }
    .hero__meta{
      margin-top:6px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }

    /* Keep existing ids used by app.js */
    #timerMeta{ color: var(--muted); }
    #meta{ color: var(--muted); }

    /* Quiz grid (compat with your JS) */
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media (min-width: 980px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    /* Question cards (your app.js likely uses .card/.qtitle/.choice) */
    .card{
      background: var(--panel2);
      border:1px solid rgba(255,255,255,.06);
      border-radius: var(--r20);
      padding:16px;
      box-shadow: var(--shadow2);
    }
    .qtitle{
      margin:0 0 10px 0;
      font-weight:900;
      letter-spacing:.1px;
      font-size:14.5px;
      line-height:1.35;
    }

    .qhead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }

    .flagToggle{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(120,170,255,.22);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
      flex:0 0 auto;
    }

    .flagToggle:hover{
      background: rgba(100,167,255,.06);
      border-color: rgba(100,167,255,.35);
    }

    .flagInput{
      position:absolute;
      opacity:0;
      pointer-events:none;
    }

    .flagIcon{
      width:18px;
      height:18px;
      display:inline-block;
      border-radius:6px;
      border:1px solid rgba(120,170,255,.25);
      background: rgba(255,255,255,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      position:relative;
    }

    /* "–§–ª–∞–∂–æ–∫" —Ä–∏—Å—É–µ–º –ø—Å–µ–≤–¥–æ-—ç–ª–µ–º–µ–Ω—Ç–æ–º */
    .flagIcon::before{
      content:"";
      position:absolute;
      left:6px; top:4px;
      width:6px; height:10px;
      border-left:2px solid rgba(255,255,255,.0);
      border-right:2px solid rgba(255,255,255,.0);
      border-top:2px solid rgba(255,255,255,.0);
      border-bottom:2px solid rgba(255,255,255,.0);
    }

    /* –∫–æ–≥–¥–∞ –æ—Ç–º–µ—á–µ–Ω–æ ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ üö© */
    .flagInput:checked + .flagIcon{
      border-color: rgba(255,107,122,.45);
      background: rgba(255,107,122,.10);
      box-shadow: 0 0 0 3px rgba(255,107,122,.14);
    }

    /* —Å–∞–º "—Ñ–ª–∞–≥" (—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ + –ø–∞–ª–∫–∞) */
    .flagInput:checked + .flagIcon::before{
      content:"";
      position:absolute;
      left:7px; top:3px;
      width:0; height:0;
      border-top:6px solid transparent;
      border-bottom:6px solid transparent;
      border-left:8px solid rgba(255,107,122,.95); /* —Ü–≤–µ—Ç —Ñ–ª–∞–≥–∞ */
    }

    .flagInput:checked + .flagIcon::after{
      content:"";
      position:absolute;
      left:6px; top:3px;
      width:2px; height:12px;
      background: rgba(255,255,255,.85); /* "–¥—Ä–µ–≤–∫–æ" */
      border-radius:2px;
    }

    .flagText{
      font-size:12.5px;
      color:#a4b5d6;
      font-weight:700;
      letter-spacing:.1px;
    }

    .flagInput:checked ~ .flagText{
      color: rgba(255,160,170,.95);
    }

    .choice{
      display:flex;
      gap:10px;
      align-items:flex-start;
      margin:8px 0;
      padding:10px 10px;
      border:1px solid rgba(120,170,255,.20);
      border-radius: 16px;
      background: rgba(255,255,255,.03);
      transition: background .12s ease, border-color .12s ease, transform .08s ease;

      user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
    }
    .choice:hover{
      background: rgba(100,167,255,.06);
      border-color: rgba(100,167,255,.34);
    }
    .choice input{ margin-top:3px; accent-color: var(--accent2); }

    .divider{ height:1px; background: rgba(255,255,255,.06); margin:14px 0; }

    .result{ font-size:18px; font-weight:900; }
    .ok{ color: var(--ok); }
    .bad{ color: var(--bad); }

    /* Output panel */
    #out{ display:none; }

    /* Bottom action bar */
    .bottombar{
      position:sticky;
      bottom:0;
      z-index:40;
      padding:14px 18px 18px;
      background: linear-gradient(180deg, transparent, rgba(7,11,18,.85) 25%, rgba(7,11,18,.92));
      backdrop-filter: blur(14px);
    }
    .bottombar__inner{
      max-width:1200px;
      margin:0 auto;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
    }
.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}


    /* Show actions only when test is running */
    .app.is-running .actions{
      display:flex;
    }

    /* Small quality-of-life */
    .mono{
      font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
      font-size:12.5px;
      color:var(--muted);
    }

    /* Collapsible details/summary for compact errors display */
    details{
      margin:8px 0;
    }

    summary{
      cursor:pointer;
      user-select:none;
      padding:10px 10px;
      border-radius:12px;
      background:rgba(255,255,255,.03);
      border:1px solid rgba(120,170,255,.22);
      transition: background .12s ease, border-color .12s ease;
      font-weight:600;
      color:var(--text);
    }

    summary:hover{
      background:rgba(100,167,255,.06);
      border-color:rgba(100,167,255,.34);
    }

    details[open] summary{
      background:rgba(100,167,255,.08);
      border-color:rgba(100,167,255,.35);
      margin-bottom:8px;
    }

    details > :not(summary){
      margin-left:10px;
      padding:8px 0;
    }
    /* –í–æ–ø—Ä–æ—Å –ø–æ–ø–∞–ª –≤ —ç–∫—Ä–∞–Ω –∏ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç */
.card.needs-answer{
  border-color: rgba(255,107,122,.55) !important;
  box-shadow: 0 0 0 3px rgba(255,107,122,.18), var(--shadow2);
  background: linear-gradient(0deg, rgba(255,107,122,.06), rgba(255,107,122,0)) , var(--panel2);
}

/* –º–∞–ª–µ–Ω—å–∫–∞—è –º–µ—Ç–∫–∞ "–ü—Ä–æ–ø—É—â–µ–Ω–æ" —Å–ø—Ä–∞–≤–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ */
.qhead .skipBadge{
  margin-left:auto;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,107,122,.45);
  background: rgba(255,107,122,.10);
  color: rgba(255,160,170,.95);
  font-size:12px;
  font-weight:800;
  letter-spacing:.1px;
}

/* ===== Hardmode: Break & Fly Animation ===== */
#activeQuestionCard.breakOut{
  animation: breakFly .55s ease forwards;
}

@keyframes breakFly{
  40%{ transform: rotate(-2deg) scale(1.02); }
  100%{ transform: translateX(180px) rotate(12deg); opacity:0; }
}

/* ===== Hardmode: Fail Animation ===== */
#activeQuestionCard.hardmode-fail{
  animation: hardmodeFailShake .6s ease forwards;
  border-color: rgba(255,107,122,.8) !important;
  box-shadow: 0 0 0 4px rgba(255,107,122,.4), var(--shadow2) !important;
  background: linear-gradient(0deg, rgba(255,107,122,.15), rgba(255,107,122,0)), var(--panel2) !important;
}

@keyframes hardmodeFailShake{
  0%, 100%{ transform: translateX(0); }
  10%, 30%, 50%, 70%, 90%{ transform: translateX(-8px); }
  20%, 40%, 60%, 80%{ transform: translateX(8px); }
}

.hardmode-fail-overlay{
  position: fixed;
  inset: 0;
  z-index: 1000;
  background: rgba(7,11,18,.85);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity .3s ease;
}

.hardmode-fail-overlay.show{
  opacity: 1;
}

.hardmode-fail-content{
  text-align: center;
  padding: 32px 40px;
  border-radius: 20px;
  background: linear-gradient(135deg, rgba(255,107,122,.15), rgba(255,107,122,.08));
  border: 2px solid rgba(255,107,122,.5);
  box-shadow: 0 20px 60px rgba(255,107,122,.3);
  animation: failContentPop .4s ease forwards;
}

@keyframes failContentPop{
  0%{ transform: scale(0.8); opacity: 0; }
  50%{ transform: scale(1.05); }
  100%{ transform: scale(1); opacity: 1; }
}

.hardmode-fail-icon{
  font-size: 64px;
  margin-bottom: 16px;
  animation: failIconShake .5s ease;
}

@keyframes failIconShake{
  0%, 100%{ transform: rotate(0deg); }
  25%{ transform: rotate(-10deg); }
  75%{ transform: rotate(10deg); }
}

.hardmode-fail-title{
  font-size: 28px;
  font-weight: 900;
  color: #ff6b7a;
  margin-bottom: 8px;
  letter-spacing: .5px;
}

.hardmode-fail-sub{
  font-size: 16px;
  color: var(--muted);
}

/* ===== Hardmode: Progress Bar ===== */
.q-progress{
  height: 4px;
  background: rgba(255,255,255,.08);
  border-radius: 2px;
  overflow: hidden;
  margin-top: 12px;
  margin-bottom: -4px;
}

.q-progress__bar{
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  width: 0%;
  border-radius: 2px;
}

.q-progress__bar{
  animation: q-progress-fill 5s linear forwards;
}

@keyframes q-progress-fill{
  from{ width: 0%; }
  to{ width: 100%; }
}

#activeQuestionCard.time-low .q-progress__bar{
  background: linear-gradient(90deg, var(--warn), #ff8c4b);
  animation-duration: 1.5s;
}


.analytics-table{
  width: 100%;
  font-size: 12px;
  border-collapse: collapse;
  margin-bottom: 12px;
}

.analytics-table th,
.analytics-table td{
  padding: 6px 8px;
  text-align: left;
  border-bottom: 1px solid var(--stroke2);
}

.analytics-table th{
  font-weight: 700;
  color: var(--muted);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.analytics-table td{
  color: var(--text);
}

.analytics-table tr:hover{
  background: rgba(255,255,255,.03);
}

.analytics-stats-row{
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  font-size: 12px;
  border-bottom: 1px solid var(--stroke2);
}

.analytics-stats-label{
  color: var(--muted);
}

.analytics-stats-value{
  color: var(--text);
  font-weight: 600;
}

/* ===== Analytics Filters ===== */
.analytics-filters{
  margin-bottom: 20px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid var(--stroke2);
  border-radius: var(--r16);
}

.analytics-filters__row{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-bottom: 12px;
}

.analytics-filter{
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.analytics-filter span{
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
}

.analytics-filter__input{
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--stroke2);
  border-radius: 8px;
  color: var(--text);
  font-size: 13px;
  font-family: inherit;
}

.analytics-filter__input:focus{
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(43, 108, 255, 0.1);
}

.analytics-filter-checkbox{
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text);
  cursor: pointer;
}

.analytics-filter-checkbox input[type="checkbox"]{
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.analytics-info{
  margin-bottom: 16px;
  padding: 10px 12px;
  background: rgba(255, 192, 107, 0.1);
  border-left: 3px solid var(--warn);
  border-radius: 6px;
  font-size: 12px;
}

/* ===== Analytics Table Improvements ===== */
.analytics-table{
  width: 100%;
  font-size: 12px;
  border-collapse: collapse;
  margin-bottom: 16px;
}

.analytics-table th{
  padding: 10px 8px;
  text-align: left;
  font-weight: 700;
  color: var(--muted);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: 2px solid var(--stroke2);
  white-space: nowrap;
}

.analytics-table td{
  padding: 10px 8px;
  color: var(--text);
  border-bottom: 1px solid var(--stroke2);
}

.analytics-table-row{
  cursor: pointer;
  transition: background 0.15s ease;
}

.analytics-table-row:hover{
  background: rgba(255, 255, 255, 0.05);
}

.analytics-table-row.analytics-row-low-sample{
  opacity: 0.6;
  background: rgba(255, 192, 107, 0.05);
}

.analytics-question-cell{
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@media (max-width: 768px){
  .analytics-filters__row{
    grid-template-columns: 1fr;
  }
  
  .analytics-table{
    font-size: 11px;
  }
  
  .analytics-table th,
  .analytics-table td{
    padding: 8px 4px;
  }
  
  .analytics-question-cell{
    max-width: 150px;
  }
}

/* ===== Analytics Modal ===== */
.analytics-modal{
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.analytics-modal__overlay{
  position: absolute;
  inset: 0;
  background: rgba(7, 11, 18, 0.85);
  backdrop-filter: blur(8px);
}

.analytics-modal__content{
  position: relative;
  z-index: 1;
  background: var(--panel);
  border: 1px solid var(--stroke2);
  border-radius: var(--r20);
  box-shadow: var(--shadow);
  max-width: 900px;
  width: 100%;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.analytics-modal__header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--stroke2);
}

.analytics-modal__title{
  margin: 0;
  font-size: 20px;
  font-weight: 800;
  color: var(--text);
}

.analytics-modal__close{
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 32px;
  line-height: 1;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: all 0.2s ease;
}

.analytics-modal__close:hover{
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
}

.analytics-modal__body{
  padding: 24px;
  overflow-y: auto;
  flex: 1;
}

/* —á—Ç–æ–±—ã #quiz –±—ã–ª —Ç–æ–π –∂–µ —à–∏—Ä–∏–Ω—ã, —á—Ç–æ –∏ .hero (—Ç.–µ. –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É main) */
.app.is-running .grid{
  max-width: none;   /* –∏–ª–∏ max-width: 100%; */
  margin: 0;         /* —É–±–∏—Ä–∞–µ–º —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
}

/* —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ Hardmode */
.app.hardmode-active .grid{
  display: flex;
  justify-content: center;
}

.timer-display{
  display:flex;
  align-items:center;
  gap:6px;
  color:#e8eef6;
  font-size:14px;
  font-weight:600;
}

.timer-display__label{
  color:#9db0c9;
  font-size:13px;
}

.achv-toast{
  position: fixed;
  left: 50%;
  bottom: 16px;
  transform: translate(-50%, 12px);
  z-index: 999;

  display: flex;
  align-items: center;
  gap: 12px;

  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid #243246;
  background: #121a24;
  color: #e8eef6;
  box-shadow: 0 14px 40px rgba(0,0,0,.45);

  opacity: 0;
  transition: .35s ease;
  max-width: min(520px, calc(100vw - 24px));
}

.achv-toast.show{
  opacity: 1;
  transform: translate(-50%, 0);
}

.achv-badge{
  width: 46px;
  height: 46px;
  border-radius: 14px;

  display: flex;
  align-items: center;
  justify-content: center;

  font-weight: 900;
  letter-spacing: .5px;

  border: 1px solid rgba(100,167,255,.45);
  background:
    radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,.14), transparent 60%),
    linear-gradient(135deg, rgba(43,108,255,.95), rgba(100,167,255,.55));
}

.achv-title{ font-weight: 900; }
.achv-sub{ color: #9db0c9; font-size: 13px; margin-top: 2px; }

/* –ú–∏–≥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ */
#activeQuestionCard.time-low{
  animation: timeLowBlink .35s ease-in-out infinite;
}

@keyframes timeLowBlink{
  0%,100%{ filter: none; }
  50%{ filter: brightness(1.25); }
}
@media (max-width: 640px){
  .topbar,
  .bottombar{
    position: static;   /* –æ—Ç–∫–ª—é—á–∞–µ—Ç sticky */
  }

  .sidebar{
    position: static;   /* —á—Ç–æ–±—ã –Ω–µ –ø—Ä–∏–ª–∏–ø–∞–ª–∞ —Ç–æ–∂–µ */
    top: auto;
  }

  /* –µ—Å–ª–∏ –∏–∑-–∑–∞ topbar/bottombar –±—ã–ª–∏ –æ—Ç—Å—Ç—É–ø—ã ‚Äî –º–æ–∂–Ω–æ —á—É—Ç—å –ø–æ–¥–∫—Ä—É—Ç–∏—Ç—å */
  .app.is-running .content{
    padding-bottom: 18px;
  }
}
