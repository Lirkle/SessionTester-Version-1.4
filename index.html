<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz</title>
  <link rel="icon" type="image/png" href="static/img/icon.png">
  <link rel="stylesheet" href="static/styles.css">
</head>

<body>
 
  <div class="app">

    <!-- TOP BAR -->
    <header class="topbar">
      <div class="topbar__inner">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div> 
          <div>
            <h1>Quiz: <span id="testSizeDisplay">10</span> —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ 1.4</h1>
            <div class="subtitle">
              –†–µ–∂–∏–º: <span class="kbd">–≤–≤–æ–¥</span> –∏–ª–∏ <span class="kbd">A‚ÄìE</span> ¬∑ –í A‚ÄìE: 1 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π + 4 —Å–ª—É—á–∞–π–Ω—ã—Ö
            </div>
          </div>
        </div>

        <div class="topstats">
          <span class="pill" id="statusPill"><span class="dot"></span>–¢–µ—Å—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω</span>
          <span class="pill"><span class="dot" style="background:var(--accent2);box-shadow:0 0 0 3px rgba(100,167,255,.18)"></span><span id="meta"></span></span>
          <span class="pill stats-pill" id="achievementPill" style="display:none;">
            <span class="achv-cup" id="achievementCup" aria-hidden="true"></span>
            <span class="achievement-text" id="achievementDisplay"></span>
          </span>
          <span class="pill stats-pill"><span class="dot" style="background:var(--warn);box-shadow:0 0 0 3px rgba(255,192,107,.18)"></span>–í—Ä–µ–º—è: <span id="siteTimeDisplay">0 –º–∏–Ω 0 —Å–µ–∫</span></span>
          <span class="pill stats-pill"><span class="dot" style="background:var(--accent);box-shadow:0 0 0 3px rgba(43,108,255,.18)"></span>EXP: <span id="expDisplay">0</span> ¬∑ <span id="rankDisplay">–ù–æ–≤–∏—á–æ–∫</span></span>
          <span class="pill stats-pill"><span class="dot" style="background:var(--ok);box-shadow:0 0 0 3px rgba(66,230,163,.18)"></span>–¢–µ—Å—Ç–æ–≤: <span id="testsCompletedDisplay">0</span></span>
        </div>
      </div>
    </header>

    <!-- CONTENT -->
    <main class="content">

      <!-- SIDEBAR -->
      <aside class="panel sidebar">
        <div class="panel__head">
          <p class="panel__title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∞</p>
          <span class="mono">Ctrl+F / –ø–æ–∏—Å–∫</span>
        </div>

        <div class="panel__body">
          <div class="field">
            <div class="label">
              <span>–†–µ–∂–∏–º</span>
              <span class="muted small">A‚ÄìE / —Ç–µ–∫—Å—Ç</span>
            </div>
            <select id="modeSelect">
              <option value="mcq">A‚ÄìE (–≤—ã–±–æ—Ä)</option>
              <option value="text">–¢–µ–∫—Å—Ç (–≤–≤–æ–¥)</option>
            </select>
          </div>

          <div class="field">
            <div class="label">
              <span>–ö–æ–ª-–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤</span>
              <span class="muted small">10‚Äì<span id="maxTestSizeDisplay">150</span></span>
            </div>
            <select id="testSizeSelect">
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="30">30</option>
              <option value="50">50</option>
              <option value="140">140</option>
              <option value="150">150</option>
              <option value="210">210</option>
              <option value="290">290</option>
            </select>
          </div>

          <div class="field">
            <div class="label">
              <span>–¢–µ—Å—Ç</span>
              <span class="muted small">–±–∞–Ω–∫</span>
            </div>
            <select id="bankSelect">
              <option value="gaziz">–ì–∞–∑–∏–∑</option>
              <option value="azamat">–ê–∑–∞–º–∞—Ç</option>
              <option value="kundyz">–ö—É–Ω–¥—ã–∑</option>
              <option value="gaziz_kundyz">–ì–∞–∑–∏–∑ + –ö—É–Ω–¥—ã–∑</option>
            </select>
          </div>

          <div class="field">
            <div class="label">
              <span>Hardmode</span>
              <span class="muted small">–∞–Ω—Ç–∏-–æ—á–µ–≤–∏–¥–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã</span>
            </div>
            <label class="hardmode-toggle">
              <input id="hardModeToggle" type="checkbox">
              <span class="hardmode-toggle__pill">
                <span class="hardmode-toggle__icon" aria-hidden="true"></span>
                <span class="hardmode-toggle__text">
                  <span class="hardmode-toggle__title">–í–∫–ª—é—á–∏—Ç—å Hardmode</span>
                  <span class="hardmode-toggle__sub">—Ç–∞–π–º–µ—Ä 5 —Å–µ–∫, –æ–¥–∏–Ω —à–∞–Ω—Å</span>
                </span>
              </span>
            </label>
          </div>

          <div class="btnrow">
            <button id="startBtn">–ù–∞—á–∞—Ç—å</button>
            <button id="restartBtn" class="secondary" disabled>–ó–∞–Ω–æ–≤–æ</button>
          </div>

          <button id="clearFlagsBtn" class="secondary" style="width:100%;margin-top:8px;">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–ª–∞–∂–∫–∏</button>
          <button id="analyticsBtn" class="secondary" style="width:100%;margin-top:8px;">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>

          <div class="helper">
            –ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤ —Ä–µ–∂–∏–º–µ <span class="kbd">A‚ÄìE</span> –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –±–∞–∑—ã –æ—Ç–≤–µ—Ç–æ–≤.
            –í <span class="kbd">–¢–µ–∫—Å—Ç</span> ‚Äî –≤–≤–æ–¥–∏—à—å –æ—Ç–≤–µ—Ç –≤—Ä—É—á–Ω—É—é.
          </div>
        </div>
      </aside>

      <!-- MAIN -->
      <section class="main">
        <div class="hero">
          <div class="hero__row">
            <div class="hero__left">
              <p class="hero__title">–í–æ–ø—Ä–æ—Å—ã</p>
              <div class="muted small">
                –û—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –ü–æ—Å–ª–µ ‚Äú–ó–∞–≤–µ—Ä—à–∏—Ç—å‚Äù –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ—à–∏–±–∫–∏.
              </div>
            </div>

            <div class="hero__meta">
              <span class="pill"><span class="dot" style="background:var(--warn)"></span>–°—Ç–∞—Ç—É—Å: <span id="statusText">–≥–æ—Ç–æ–≤</span></span>
              <span class="pill"><span class="dot" style="background:var(--accent2)"></span>–ë–∞–Ω–∫: <span id="bankText">‚Äî</span></span>
              <span class="pill"><span class="dot" style="background:var(--ok)"></span>–¢–∞–π–º–µ—Ä: <span id="timerText">‚Äî</span></span>
            </div>
          </div>
        </div>

        <!-- IMPORTANT: id="out" kept for your app.js (moved above quiz for better visibility) -->
        <div id="out" class="card"></div>

        <!-- IMPORTANT: id="quiz" and class="grid" kept for your app.js -->
        <div id="quiz" class="grid"></div>
      </section>

    </main>

    <!-- BOTTOM ACTION BAR -->
    <footer class="bottombar">
      <div class="bottombar__inner">
        <div class="muted small">
          –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏: <span class="kbd">Tab</span> –Ω–∞–≤–∏–≥–∞—Ü–∏—è ¬∑ <span class="kbd">Enter</span> –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        </div>

        <div class="timer-display">
          <span class="timer-display__label">–í—Ä–µ–º—è:</span>
          <span id="floatingTimerDisplay">0:00</span>
        </div>

        <div class="actions">
          <button id="finishBtn" class="secondary" disabled>–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –ø–æ—Å—á–∏—Ç–∞—Ç—å</button>
          <button id="abortBtn" class="secondary" disabled>–û—Ç–º–µ–Ω–∞</button>
          <button id="learnBtn" class="secondary" disabled>–û–±—É—á–µ–Ω–∏–µ (–ø–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç—ã)</button>
          <button id="backBtn" class="secondary" disabled>‚Üê –ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç—É</button>
          <button id="hardBtn" type="button" class="secondary" disabled>–°–ª–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã</button>
        </div>
      </div>
    </footer>

  </div>

  <!-- Analytics Modal -->
  <div id="analyticsModal" class="analytics-modal" style="display:none;">
    <div class="analytics-modal__overlay"></div>
    <div class="analytics-modal__content">
      <div class="analytics-modal__header">
        <h2 class="analytics-modal__title">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
        <button id="analyticsModalClose" class="analytics-modal__close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="analytics-modal__body">
        <div id="analyticsContent"></div>
      </div>
    </div>
  </div>

  <!-- Banks + App -->
  <script>window.QUIZ_BANKS = window.QUIZ_BANKS || {};</script>
  <script src="banks/gaziz.bank.js"></script>
  <script src="banks/azamat.bank.js"></script>
  <script src="banks/kundyz.bank.js"></script>
  <script src="static/app.js"></script>

  <!-- Optional small UI mirrors (doesn't break app.js; safe if elements exist) -->
  <script>
    // These are purely visual mirrors; app.js can ignore them.
    const bankText = document.getElementById('bankText');
    const statusText = document.getElementById('statusText');

    function syncMirrors(){
      const bankSelectEl = document.getElementById('bankSelect');
      if (bankText && bankSelectEl) bankText.textContent = bankSelectEl.options[bankSelectEl.selectedIndex]?.textContent || '‚Äî';
      const sp = document.getElementById('statusPill')?.textContent?.trim();
      if (statusText) statusText.textContent = sp || '–≥–æ—Ç–æ–≤';
    }

    const bankSelectEl = document.getElementById('bankSelect');
    if (bankSelectEl) bankSelectEl.addEventListener('change', syncMirrors);
    setInterval(syncMirrors, 700);
    syncMirrors();
  </script>
</body>
</html>
